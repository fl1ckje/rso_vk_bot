РСО VK Бот
========================================================================================================================================

> Вставляет в изображения рамки в честь дня РСО.

> До безобразия простая реализация синхронного Long Poll

> Работает в обёртке [vk_api](https://github.com/python273/vk_api)

---

## Установка

- Убедитесь, что у вас установлен интерпретатор Python версии 3.7 или новее;
- Убедитесь в том, что интерпретатор добавлен в PATH;
- Клонируйте или загрузите этот репозиторий;
- Не забудьте заменить ресурсы (в папках examples и frames, но с теми же именами файлов и их расширениями). Например: Вожатый.png => Вожатый.png

> Установите все зависимости (откройте cmd или терминал в папке с requirements.txt)

```
pip3 install -r requirements.txt
```

---

## Настройка

- Создайте ключ доступа (https://vk.com/АДРЕС_ВАШЕЙ_ГРУППЫ?act=tokens). При создании ключа следует выдать все разрешения на работу с сообщениями и медиа вложениями. После создания ключа скопируйте его и сохраните куда-нибудь. Никому не давайте свой ключ доступа! 
- Перейдите во вкладку "Long Poll API" => "Настройки" (https://vk.com/АДРЕС_ВАШЕЙ_ГРУППЫ?act=longpoll_api). Здесь включите "Long Poll API" и укажите версию API 5.92;
- Перейдите во вкладку "Long Poll API" => "Типы событий" (https://vk.com/АДРЕС_ВАШЕЙ_ГРУППЫ?act=longpoll_api_types). Здесь разрешите все события типов "Сообщения" и "Фото";
- Перейдите во вкладку "Сообщения" (https://vk.com/АДРЕС_ВАШЕЙ_ГРУППЫ?act=messages), включите "Сообщения сообщества" и отметьте галочку "Добавить в левое меню";
- Перейдите во вкладку "Настройки для бота" (https://vk.com/АДРЕС_ВАШЕЙ_ГРУППЫ?act=messages&tab=bots), включите "Возможности ботов" и отметьте галочку "Добавить кнопку «Начать»". На этом настройка группы завершена;
- Теперь вернитесь к папке со скриптом, откройте и заполните файл config.ini. Если вы его удалили, то запустите бота (см. пункт "Запуск" ниже): он сам сгенерирует файл конфигурации. После генерации файла следует заполнить его и перезапустить скрипт.

> config.ini будет выглядеть так:

```
[Group bot config]
group_token = value
group_id = value
api_ver = value
wait_time = value
img_format = value
database_update_time = value
```

>Значения прописываются без ковычек и скобок.
>Пример правильного файла конфигурации:

```
[Group bot config]
group_token = e625736768250ght43259dwfwe
group_id = 186212382
api_ver = 5.92
wait_time = 25
img_format = png
database_update_time = 3600
```

Легенда:
- group_token - токен вашей группы, так называемый "ключ доступа", который вы создали и получили ранее;
- group_id - id группы, узнать его НУЖНО [здесь](http://regvk.com/id). Под id группы понимается комбинация чисел после слова "club". Например, если адрес группы - club186212382, то её id - 186212382;
- api_ver - используемая версия VK API. Рекомендуется версия 5.92. Начиная с 5.100+ изменена обработка событий, поэтому версии 5.100+ приведут к невозможности обрабатывать события (поступающие сообщения) и ошибкам;
- wait_time - время ожидания (так как некоторые прокси-серверы обрывают соединение после 30 секунд, рекомендуется указывать 25). Максимальное значение — 90.
- img_format - формат изображений. Лучше оставить png, т.к. он обеспечивает отсутствие потери качества;
- database_update_time - интервал запроса на обновление базы данных (в секундах). Под обновлением базы данных подразумевается её очистка, т.е. в ней удаляются строки с пользователями, таймаут которых уже прошёл. Вызов проверки на обновление работает тогда, когда бот получает какое-либо событие (в данном случае - сообщение). Вместе со строками из БД удаляются и изображения удалённых пользователей, если они есть.

---

## Запуск

> Запустите скрипт bot.py:

```
python bot.py
```

---

## Обратная связь и пожертвования (при желании)

<a href="http://vk.com/fl1ckje" target="_blank">`Мой профиль ВКонтакте`</a>

---

## Лицензия

[![License](http://img.shields.io/:license-mit-blue.svg?style=flat-square)](http://badges.mit-license.org)
